<div class="mx-auto max-w-6xl p-6 lg:p-10">
    <div class="flex items-start justify-between gap-6">
        <div>
            <h1 class="text-2xl font-semibold tracking-tight">Maps</h1>
            <p class="mt-1 text-sm text-slate-500 dark:text-white/50">
                Browse through maps provided by Call to Arms - Gates Of Hell.
            </p>
        </div>

        <div class="flex items-center gap-3">
            <input
                    class="w-64 input"
                    placeholder="Search maps..."
                    [value]="query()"
                    (input)="query.set(($any($event.target).value ?? '').trim())"
            />
        </div>
    </div>

    <div class="mt-8 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3">
        @for (m of visibleMaps(); track m.name) {
            <button
                    type="button"
                    class="group text-left rounded-2xl border border-slate-200 dark:border-white/25 overflow-hidden hover:shadow-md transition-shadow"
            >
                <div class="aspect-video overflow-hidden">
                    <img
                            class="h-full w-full object-cover transition-transform group-hover:scale-[1.02]"
                            [ngSrc]="previewUrl(m)"
                            [alt]="m.name"
                            loading="lazy"
                            width="281"
                            height="158"
                            (error)="onPreviewError(m)"
                    />
                </div>

                <div class="p-4">
                    <div class="flex items-start justify-between gap-3">
                        <div class="min-w-0">
                            <div class="text-sm font-semibold text-slate-900 dark:text-white truncate">
                                {{ m.name }}
                            </div>
                        </div>
                    </div>
                </div>
            </button>
        }
    </div>

    @if (visibleMaps().length === 0) {
        <div class="mt-8 rounded-2xl border border-slate-200 dark:border-white/50 p-6 text-sm text-slate-600 dark:text-white/50">
            No maps match your search.
        </div>
    }
</div>