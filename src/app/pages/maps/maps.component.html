<div class="flex items-start justify-between gap-6">
    <div>
        <h1 class="text-2xl font-semibold tracking-tight">Maps</h1>
        <p class="mt-1 text-sm text-slate-500 dark:text-white/50">
            Browse through maps provided by Call to Arms - Gates Of Hell.
        </p>
    </div>

    <div class="flex items-center gap-3">
        <input
                (input)="query.set(($any($event.target).value ?? '').trim())"
                [value]="query()"
                class="w-64 input"
                placeholder="Search maps..."
        />
    </div>
</div>

<div class="mt-8 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3">
    @for (m of visibleMaps(); track m.name) {
        <button
                class="group text-left rounded-2xl border border-slate-200 dark:border-white/25 overflow-hidden hover:shadow-md transition-shadow"
                type="button"
        >
            <div class="aspect-video overflow-hidden">
                <img
                        (error)="onPreviewError(m)"
                        [alt]="m.name"
                        [ngSrc]="previewUrl(m)"
                        class="h-full w-full object-cover transition-transform group-hover:scale-[1.02]"
                        height="158"
                        loading="lazy"
                        width="281"
                />
            </div>

            <div class="p-4">
                <div class="flex items-start justify-between gap-3">
                    <div class="min-w-0">
                        <div class="text-sm font-semibold text-slate-900 dark:text-white truncate">
                            {{ m.name }}
                        </div>
                    </div>
                </div>
            </div>
        </button>
    }
</div>

@if (visibleMaps().length === 0) {
    <div class="mt-8 rounded-2xl border border-slate-200 dark:border-white/50 p-6 text-sm text-slate-600 dark:text-white/50">
        No maps match your search.
    </div>
}